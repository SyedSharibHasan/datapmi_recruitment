<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
   
    <link rel="stylesheet" href="https://cdn.datatables.net/1.10.24/css/jquery.dataTables.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css">
    <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
    <script src="https://cdn.datatables.net/1.10.24/js/jquery.dataTables.min.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.4.1/dist/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
    
    <title>My candidates</title>
    <style>
        body {
            font-family: 'Arial', sans-serif;
            background-color: #f4f4f4;
            margin: 0;
            padding: 0;
            background-image: url('/static/project_images/Profile.jpg');
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            width: 100vw; /* Set the width to full viewport width */
        }

        .container {
            width: 80%;
            margin: 20px auto;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 20px;
            background-color: #fff;
            box-shadow: 0 0 10px rgba(172, 29, 29, 0.1);
            border-radius: 8px;
            overflow: hidden;
            background: transparent !;
        }

        th, td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }

        th {
            background-color: #0a5bac;
            color: #ecf0f1;
        }

        tr:hover {
            background-color: #f5f5f5;
        }

        input {
            border: 3px solid #ced4da !important;
            background-color: #ecf0f1 !important;
        }

        label {
            color: white;
        }


        #select-all {
            display: none;
        }

        /* Style the label to create a custom checkbox */
        #select-all+label {
            display: inline-block;
            position: relative;
            padding-left: 25px;
            /* Adjust according to your preference */
            cursor: pointer;
        }

        /* Create the custom checkbox */
        #select-all+label:before {
            content: '';
            position: absolute;
            left: 0;
            top: 2px;
            /* Adjust vertical alignment */
            width: 18px;
            height: 18px;
            border: 1px solid #aaa;
            /* Border color */
            background-color: #fff;
            /* Background color */
        }

        /* Style the checkbox when checked */
        #select-all:checked+label:before {
            background-color: #2196F3;
            /* Change background color when checked */
            border-color: #2196F3;
            /* Change border color when checked */
        }

        /* Create the checkmark icon */
        #select-all+label:after {
            content: '\2713';
            /* Unicode for checkmark symbol */
            position: absolute;
            top: 0;
            left: 4px;
            font-size: 14px;
            color: #fff;
            /* Checkmark color */
            display: none;
        }

        /* Show the checkmark when checkbox is checked */
        #select-all:checked+label:after {
            display: block;
        }


        /* Responsive styles */
        @media only screen and (max-width: 600px) {
            .container {
                width: 100%;
                padding: 60px 10px;
            }
            body {
                background-size: auto 200%; /* Adjust background size to cover full height */
                background-repeat: no-repeat;
            }
        }
    </style>
</head>
<body>

{% block content %}
  
{% include 'navbar.html' %}
{% include 'base.html' %}
    
<br>
<br>
<br>
<br>
<center><a href="{% url 'create' %}"><button class="btn btn-light">Create&nbsp; <i class="bi bi-person-plus"></i></button></a></center><br>
<center>
    <form method="POST" enctype="multipart/form-data">
        {% csrf_token %}
        <input type="file" name="myfile"  accept=".xlsx, .xls, .xltx, .xlt, .xlsm" required/>
        <button type="submit" class="btn btn-success">Submit Excel</button>       
    </form>
</center>



<br>    
<div class="container">

    <button onclick="myfunction()" style="font-size: 13px;" class="btn btn-light">Manage<i
        style="color: green;font-size: 19px;" class="bi bi-file-earmark-excel-fill"></i></button>
    <br><br>
    
    <script>
        function myfunction() {
            let nones = document.querySelectorAll('.none');
            nones.forEach(function (element) {
                if (element.style.display === 'block' || getComputedStyle(element).display === 'block') {
                    element.style.display = 'none';
                } else {
                    element.style.display = 'block';
                }
            });
        }
    </script>
    
    
    <div style="display:none;" class="none">
    <input id="select-all" type="checkbox"> <label for="select-all">Select All</label>      <button title="This will export selected employee details to excel" style="font-size: 13px;color: #df0a2d;" class="btn btn-light" id="export-link" onclick="exportSelected()">Delete<i class="bi bi-trash3"></i></button>
    </div>
    
    <br>

    <table class="table">
        <thead>
            <tr>
                <th style="display:none;" class="none">#</th>
                <th>sl no</th>
                <th>Name</th>
                <th>Location</th>
                <th>Designation</th>
                <th>Contact</th>
                <th>Skills</th>
                <th>Total experience</th>
                <th>Last Updated</th>
                <th>Manage</th>
            </tr>
        </thead>
      
        <tbody>
            {% for i in list %}
            <tr>

                <td class="none" style="display:none;"><input id="each" class="select-all" name="export"
                    type="checkbox" value="{{ i.id }}"></td>
                <td id="snno" ></td>
                <td>{{i.candidate_name}}</td>
                <td>{{i.location}} </td>
                <td>
                    <span>{{i.designation}} </span><br>
                    <span>{{i.client_name }} </span>
                  </td>
                <td>
                    <span >{{i.email}}</span><br>
                    <span >{{i.phone}}</span>
                  </td>
               
                    <td>
                        {% for skill in i.skills.all %}
                        {{ skill.name }}
                        {% if not forloop.last %}, {% endif %}
                        {% endfor %}
                    </td>

                    <td>{{i.experience}}y</td>
                  
                    <td>{{i.formatted_updated_on}}</td>
                    <td>  
                        <a href="{% url 'detail' i.id %}"><button style="font-size: 10px;padding: 5px 8px;" title="View"
                            class="btn btn-outline-success"><i class="bi bi-search"></i></button></a>&nbsp;

                        <a href="{% url 'update' i.id %}"><button style="font-size: 10px;padding: 5px 8px;" title="Edit"
                            class="btn btn-outline-info my-1"><i class="bi bi-pencil"></i></button></a>&nbsp; 
                        {% if i.resume %}
                            <a href="{{i.resume.url}}"><button style="font-size: 10px;padding: 5px 8px;" title="Resume"
                                class="btn btn-outline-dark"><i class="bi bi-download"></i></button></a>&nbsp;
                        {% endif %}
                        <a href="{% url 'delete' i.id %}"><button style="font-size: 10px;padding: 5px 8px;" title="Delete"
                            class="btn btn-outline-danger"><i class="bi bi-trash3"></i></button></a>&nbsp;
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>

        <script>
            // Get all elements with class "snno"
            var snnoElements = document.querySelectorAll('#snno');

            // Loop through the elements and assign incrementing numbers
            snnoElements.forEach(function (element, index) {
              element.textContent = index + 1; // Assign the incrementing number (1-based index)
            });

            function toggleSidebar() {
              var sidebar = document.getElementById('sidebar');
              var content = document.getElementById('content');

              if (sidebar.style.width === '250px') {
                sidebar.style.width = '0';
                content.style.marginLeft = '0';
              } else {
                sidebar.style.width = '250px';
                content.style.marginLeft = '250px';
              }
            }
        </script>
    </div>

    <script>
        $(document).ready(function () {
            $('.table').DataTable({

                "columnDefs": [
                    { "orderable": false, "targets": 5 }
                ],
                language: {
                    'paginate': {
                        'previous': '<span class="fa fa-chevron-left"></span>',
                        'next': '<span class="fa fa-chevron-right"></span>'
                    },
                    //customize number of elements to be displayed
                    "lengthMenu": 'Display <select >' +
                        '<option value="10">10</option>' +
                        '<option value="20">20</option>' +
                        '<option value="30">30</option>' +
                        '<option value="40">40</option>' +
                        '<option value="50">50</option>' +
                        '<option value="-1">All</option>' +
                        '</select> '
                }
            });
        });
    </script>



<script>
    function exportSelected() {
        let selectedIds = [];
        document.querySelectorAll('#each:checked').forEach(function (checkbox) {
            selectedIds.push(checkbox.value);
        });

        if (selectedIds.length > 0) {
            let url = "{% url 'selected_delete' %}?ids=" + selectedIds.join(',');
            window.location.href = url;
        } else {
            alert("Please select at least one candidate.");
        }
    }

    let selectAllCheckbox = document.getElementById('select-all');

    // Get all the checkboxes with class "each"
    let eachCheckboxes = document.querySelectorAll('#each');

    // Add event listener to the "Select All" checkbox
    selectAllCheckbox.addEventListener('change', function () {
        // Set the state of each checkbox to be the same as the "Select All" checkbox
        eachCheckboxes.forEach(function (checkbox) {
            checkbox.checked = selectAllCheckbox.checked;
        });
    });

</script>

{% endblock %}
</body>
</html>
