<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Multiple Filter</title>

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.4.1/dist/css/bootstrap.min.css"
      integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
      <link rel="stylesheet" href="https://code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.2/font/bootstrap-icons.min.css">



      <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
      rel="stylesheet"
    />
    <!-- Google Fonts -->
    <link
      href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&display=swap"
      rel="stylesheet"
    />
  
   

    <style>
        
      body {
        background-image: url('/static/project_images/Filter.jpg');
        background-size: cover;
        background-repeat: no-repeat;
      }
          .search_skill {
              padding: 8px; /* Adjust padding as needed */
              font-size: 14px; /* Adjust font size as needed */
              border: 1px solid #ccc; /* Add a border */
              border-radius: 4px; /* Add border-radius for rounded corners */
              width: 200px; /* Adjust width as needed */
          }
     
          .select_skill {
              padding: 8px; /* Adjust padding as needed */
              font-size: 11px; /* Adjust font size as needed */
              border: 1px solid #ccc; /* Add a border */
              border-radius: 4px; /* Add border-radius for rounded corners */
              width: 150px; /* Adjust width as needed */
          }

          .experience {

            width: 70px;

            border-radius: 4px;
          }
    
          .skill-box {
            font-size: 12px; 
            display: inline-block;
            padding: 8px;
            margin: 5px;
            background-color: rgb(49, 165, 58);
            color: #fff;
            border-radius: 5px;
        }

        #close-button {
            cursor: pointer;
            color: red;
            font-weight: 500;
            
        }

        /* .box {
          border: 1px solid green;
          border-radius: 5px;
          padding: 20px;
        } */
    </style>
</head>
<body>
    

  {% include 'sidebar.html' %}
    


    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.min.js"></script>
    
  <br>
  <br>
<br>



<div class="container">
  <div class="row">
      <div class="col-5">
          <form method="get" action="{% url 'filter' %}">
         
              <div> 
                <i style="color: blue;" class="bi bi-lightbulb-fill"></i> <input class="select_skill" id="select_skill" type="search" placeholder="Type skills here">
               <div  class="box" name="skills_search" id="selectedSkillsContainer"></div>
              </div>

              <script>
                $(document).ready(function () {
    var selectedSkills = [];

    $("#select_skill").autocomplete({
        source: function (request, response) {
            $.getJSON("/autocomplete-skills/", { term: request.term }, function (data) {
                response(data.suggestions);
            });
        },
        minLength: 1,
        select: function (event, ui) {
            var selectedSkill = ui.item.label;

            // Add the selected skill to the list and update the UI
            if ($.inArray(selectedSkill, selectedSkills) === -1) {
                selectedSkills.push(selectedSkill);
                updateSelectedSkillsUI();
            }

            // Clear the selection input for the next skill
            $("#select_skill").val('');

            return false;
        }
    });

    // Function to update the UI with selected skills
    function updateSelectedSkillsUI() {
        var selectedSkillsContainer = $("#selectedSkillsContainer");
        selectedSkillsContainer.empty();

        $.each(selectedSkills, function (index, skill) {
            var skillBox = $('<div class="skill-box">' + skill + '&nbsp;<i id="close-button" class="bi bi-x-lg"></i></div>');
            skillBox.find("#close-button").click(function () {
                removeSelectedSkill(index);
            });

            selectedSkillsContainer.append(skillBox);
        });

        // Update hidden input for all selected skills
        updateHiddenInputs();
    }

    // Function to remove a selected skill
    function removeSelectedSkill(index) {
        selectedSkills.splice(index, 1);
        updateSelectedSkillsUI();
    }

    // Function to update hidden input for all selected skills
    function updateHiddenInputs() {
        var hiddenInput = $('<input type="hidden" name="skills_search" value="' + selectedSkills.join(',') + '">');
        $("form").find("input[name='skills_search']").remove();  // Remove existing hidden input
        $("form").append(hiddenInput);
    }
});


              </script>

              <br>
              <!-- Location -->
              <div>
                <i style="color:red" class="bi bi-geo-alt-fill"></i> <input class="search_skill" id="search_location" name="location_search" type="search" placeholder="Kochi, Kerala">
                  <script>
                      $(function () {
                          $("#search_location").autocomplete({
                              source: function (request, response) {
                                  $.getJSON("/autocomplete-locations/", { term: request.term }, function (data) {
                                      response(data.suggestions);
                                  });
                              },
                              minLength: 1
                          });
                      });
                  </script>
              </div>

              <br>

              <!-- Experience -->
              <center>
                <i class="bi bi-briefcase-fill"></i>
                  <input name="experience_from" class="experience" min="0" type="number">&nbsp;&nbsp;&nbsp;&nbsp;To&nbsp;&nbsp;&nbsp;&nbsp;
                  <input min="0" name="experience_to" class="experience" type="number">

                  <br>
                  <br>

                  <button id="submit" title="Filter" type="submit" class="btn btn-primary">Search </button>
              </center>
          </form>
      </div>
  </div>
</div>

</div>
</body>
</html>












